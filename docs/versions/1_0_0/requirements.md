# バージョン 1.0.0 要件定義

## 1. 概要

### 1.1 背景
- 既存サービスはDiscord中心で運用されている
- 利用実態として、アクティブに発言しているユーザーは全体の約1.5%程度に留まり、約98.5%のユーザーは閲覧専用（ROM専）である
- チャット中心の設計は、情報が流れやすく再利用性が低い
- チャットの治安維持や感情的投稿対応に運営リソースが割かれている

### 1.2 目的
- **記事購読型コミュニティ**として、専門家の知見を継続的に届ける
- 専門家の知見・思考プロセスを、初心者にも分かりやすく簡潔に提供する
- ROM専ユーザーを前提とした「読むだけで価値がある体験」を最優先する
- 他プラットフォームでは得られない投資判断材料を、整理されたUIで提供する

### 1.3 サービスの核心価値
**「専門家の記事を購読する」ことがこのサービスの売り**
- ユーザーは記事を読むためにサブスクリプションに加入する
- 記事の質と継続的な発信がサービス価値の源泉
- 銘柄情報やニュースは記事価値を補完する付加機能

## 2. 成功基準

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| 記事閲覧率 | MAUの70%以上が月1回以上記事を閲覧 | Metabase |
| サブスク継続率 | 月次解約率10%以下 | Stripe Dashboard |
| ROM専ユーザー満足度 | 80%以上が「満足」と回答 | 定期ユーザーアンケート |
| 記事・ニュース表示速度 | 3秒以内 | Lighthouse |
| 月間アクティブユーザー（MAU） | 800人以上（初年度） | Metabase |

## 3. 対象ユーザー

| ペルソナ | 特徴 |
|---------|------|
| ROM専ユーザー（主要ターゲット） | 既存Discordで閲覧のみの多数派（98.5%）。発言せずに専門家の情報を受け取りたい。能動的な操作は最小限にしたい |
| 投資初心者 | 株式投資を始めたばかり。情報収集方法がわからず、専門用語に抵抗がある。分かりやすい解説と判断材料を求めている |
| アクティブ投資家 | 基礎知識はあるが、大手にない差別化された分析・判断材料を求めている。迅速な情報アクセスを重視 |

## 4. ユーザーストーリー

| ID | ペルソナ | ストーリー | 関連機能 |
|----|---------|-----------|----------|
| US-01 | ROM専ユーザー | ROM専ユーザーとして、ログイン後すぐに今日の注目記事を一目で確認したい。なぜなら能動的に情報を探す手間を省きたいから。 | F-01 |
| US-02 | 投資初心者 | 投資初心者として、気になる銘柄の基本情報と専門家の評価を1ページで確認したい。なぜなら複数サイトを回るのは面倒だから。 | F-03 |
| US-03 | ROM専ユーザー | ROM専ユーザーとして、最新ニュースを日本語で読みたい。なぜなら英語の原文を読む時間がないから。 | F-02 |
| US-04 | アクティブ投資家 | アクティブ投資家として、保有銘柄をまとめたポートフォリオでパフォーマンスを確認したい。なぜなら一括で状況把握したいから。 | F-04 |
| US-05 | ROM専ユーザー | ROM専ユーザーとして、投票結果を見て他ユーザーの意見傾向を知りたい。なぜなら自分の判断の参考にしたいから。 | F-06 |
| US-06 | 投資初心者 | 投資初心者として、気になる記事をブックマークして後で読み返したい。なぜなら一度で理解できないことがあるから。 | F-07 |
| US-07 | アクティブ投資家 | アクティブ投資家として、ポートフォリオに関連するニュースだけをまとめて確認したい。なぜなら効率的に情報収集したいから。 | F-11 |
| US-08 | ROM専ユーザー | ROM専ユーザーとして、専門家の新しい記事が公開されたら見逃さずに読みたい。なぜなら記事を読むことがこのサービスに加入している理由だから。 | F-01 |
| US-09 | 投資初心者 | 投資初心者として、専門家の思考プロセスを記事で学びたい。なぜなら独学では得られない視点を知りたいから。 | F-01 |
| US-10 | ROM専ユーザー | ROM専ユーザーとして、毎朝メールで注目記事の要約を受け取りたい。なぜなら能動的にログインしなくても情報をキャッチアップできるから。 | F-15 |
| US-11 | アクティブ投資家 | アクティブ投資家として、直近24時間で最も注目されているニュースを一目で確認したい。なぜなら市場の関心事を素早く把握したいから。 | F-02-3 |
| US-12 | 投資初心者 | 投資初心者として、AIや経済などジャンル別にニュースを整理して読みたい。なぜなら関心のある分野に絞って情報収集したいから。 | F-02-4, F-02-5 |

## 5. 機能一覧
- ID体系
  - `F-XX`: 大機能
  - `F-XX-Y`: 子機能（大機能の構成要素）
- 優先度の定義
  - **MUST**: このバージョンで必ず実装する
  - **WANT**: 余裕があれば実装する
- ステータスの定義
  - **未着手**: 詳細設計未実施
  - **設計中**: 詳細設計作成中（feature-spec実行中）
  - **実装中**: 実装作業中
  - **完了**: 実装・テスト完了

| ID | 機能名 | 概要 | 優先度 | ステータス | 詳細設計 |
|----|--------|------|--------|-----------|----------|
| F-01 | 記事機能 | 専門家による記事の作成・編集・公開・予約投稿。ジャンル分け、人気記事表示。ニュースとは明確に分離して表示 | MUST | 未着手 | - |
| F-01-1 | 記事作成・編集 | Markdownエディタによる記事作成。見出し（大・小・本文）、画像挿入・ドラッグ移動、iframe埋込、目次自動生成、ハイライト機能 | MUST | 未着手 | - |
| F-01-2 | 予約投稿 | 公開日時を指定した記事公開 | MUST | 未着手 | - |
| F-01-3 | ジャンル分け | 6ジャンル程度(増減可能)で記事を分類表示 | MUST | 未着手 | - |
| F-01-4 | 人気記事 | 72時間以内×View数で人気記事を表示 | MUST | 未着手 | - |
| F-02 | ニュース機能 | 外部APIから自動取得、日本語翻訳、即時公開。記事とは明確に分離して表示 | MUST | 未着手 | - |
| F-02-1 | ニュース自動取得 | 外部APIからニュースを取得しDBに保存 | MUST | 未着手 | - |
| F-02-2 | 日本語翻訳 | ニュースを日本語に翻訳して表示 | MUST | 未着手 | - |
| F-02-3 | トレンドニュース表示 | 直近24時間以内のニュースをスコアリング順に10個表示。スコア=View数×1pt + 人気銘柄紐付き×2pt | MUST | 未着手 | - |
| F-02-4 | ジャンル別ニュース表示 | 3ジャンル（株式市場・AI・経済等、追加可能）で各5件を最新順に表示。最新1件を大きく表示 | MUST | 未着手 | - |
| F-02-5 | ジャンル詳細ページ | ジャンル別のニュース一覧ページ。フィルター機能（期間・タイプ）、外部リンク遷移 | MUST | 未着手 | - |
| F-02-6 | ニュース編集 | 編集権限者によるニュース内容の修正 | MUST | 未着手 | - |
| F-02-7 | ニュース独自ページ | ニュース押下時に独自ページへ遷移し、LLM日本語訳を表示 | WANT | 未着手 | - |
| F-03 | 個別銘柄ページ | 株価チャート、ファンダメンタルズ、UOA、レーティング表示 | MUST | 未着手 | - |
| F-03-1 | 株価チャート | 時系列での株価推移表示 | MUST | 未着手 | - |
| F-03-2 | ファンダメンタルズ | EPS、時価総額等の基本指標表示 | MUST | 未着手 | - |
| F-03-3 | UOA表示 | Unusual Option Activity（大口オプション取引）表示 | MUST | 未着手 | - |
| F-03-4 | 銘柄関連ニュース | 銘柄に紐づくニュースを日付降順で表示 | MUST | 未着手 | - |
| F-03-5 | 人気記事/ニュース | 銘柄に紐づく記事・ニュースを直近3ヶ月×View数で表示 | MUST | 未着手 | - |
| F-03-6 | 証券会社レーティング | 買い/保有/売り、目標株価の表示 | MUST | 未着手 | - |
| F-03-7 | アナリスト格付け | Massive APIによる格付け・コメント表示 | MUST | 未着手 | - |
| F-03-8 | ニュースオーバーレイ | チャート上に値動きがあった日のニュースを表示 | MUST | 未着手 | - |
| F-04 | ポートフォリオ | 銘柄をまとめて管理（最大5つ）、パフォーマンス表示 | MUST | 未着手 | - |
| F-05 | 検索機能 | 記事／ニュース／銘柄／アンケートの検索 | MUST | 未着手 | - |
| F-06 | アンケート機能 | 最大9択、1ユーザー1回投票 | MUST | 未着手 | - |
| F-07 | ブックマーク機能 | 記事・ニュース・アンケートのブックマーク | MUST | 未着手 | - |
| F-08 | ログイン機能 | OAuth（Google / Apple / X）による認証 | MUST | 未着手 | - |
| F-09 | 設定画面 | アイコン、userId表示、サブスク管理、FAQ、問い合わせ | MUST | 未着手 | - |
| F-10 | サブスクリプション | Stripe連携、プラン管理、決済失敗時の権限制限 | MUST | 未着手 | - |
| F-11 | 関連ニュース機能 | ポートフォリオに関連するニュースを独自ページで表示 | MUST | 未着手 | - |
| F-12 | 相場異変レーダー | 全上場銘柄から異常検出（ダッシュボード内） | WANT | 未着手 | - |
| F-13 | アナリティクス | Metabaseによる閲覧数・MAU・入退会数の可視化 | WANT | 未着手 | - |
| F-14 | アンケート予約投稿 | 管理者によるアンケートの予約投稿 | WANT | 未着手 | - |
| F-15 | ニュースレター機能 | メール登録ユーザーに選択した記事の要約を毎日配信（朝7:30）。管理画面で配信リスト管理（最大5記事） | MUST | 未着手 | - |
| F-15-1 | メールアドレス登録 | ユーザーがニュースレター受信用メールアドレスを登録 | MUST | 未着手 | - |
| F-15-2 | 配信リスト管理 | 記事投稿時のチェックボックスで配信リストに追加。管理画面で確認・編集（最大5記事） | MUST | 未着手 | - |
| F-15-3 | 記事要約生成 | LLMで記事を200-300文字に要約 | MUST | 未着手 | - |
| F-15-4 | 定期配信 | 毎日朝7:30に登録ユーザーへメール送信。配信記事0の場合は送信なし | MUST | 未着手 | - |


## 6. スコープ外

- プラットフォーム内チャット機能
- コメント機能（検討中のため除外）
- 板情報・リアルタイム売買支援機能
- Discordとの機能連携
- メール＋パスワード認証

### Discordの位置づけ
- Discordはプラットフォームとは切り離して運用する
- 上位プラン特典として「Discord参加権」を付与する予定
- 双方向コミュニケーションはDiscord側に集約する
- **このプロジェクトではDiscord、チャットについて想定する必要はない**

## 7. 制約・前提

### ビジネス制約
- 完全ログイン制（未ログインユーザーは利用不可）
- 完全サブスクリプション制（無料ユーザーは存在しない）
- 運営リソースは記事執筆・ツール開発を最優先
- 高級感・専門性を損なわないUI/UX

### ロール・権限

| ロール | 権限 |
|--------|------|
| 管理者 | 全機能・全データへのアクセス |
| 記事投稿権限ユーザー | 記事投稿・自分の記事削除 |
| 一般ユーザー | 閲覧・投票・いいね・ブックマークのみ |

### プラン構成
* 上位プランについては最初(当バージョン)は不要

| プラン | 内容 |
|--------|------|
| ベースプラン | 記事・ニュース・銘柄ページの閲覧 |
| 上位プラン | 追加機能（オプションフロー可視化等）、Discord参加権 |

## 8. 未確定事項

- [ ] 記事コメント機能の有無・形態
- [ ] ニュース編集時の「編集済み」表示の要否

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| ROM専 | Read Only Member の略。閲覧のみで発言しないユーザー |
| UOA | Unusual Option Activity。大口のオプション取引を検出したもの |
| ファンダメンタルズ | EPS、時価総額、PER等の企業の基礎的財務指標 |
| レーティング | 証券会社アナリストによる買い/保有/売りの推奨評価 |
| ポートフォリオ | ユーザーが保有・注目する銘柄をまとめたもの（最大5つ作成可能） |
| シコウラボ | 思考／志向／試行 × ラボ。専門家の思考プロセスを覗ける場 |
| トレンドニュース | 直近24時間以内のニュースをスコアリング順に表示するセクション。スコア=View数×1pt + 人気銘柄紐付き×2pt |
| ニュースジャンル | ニュースを分類するカテゴリ（株式市場・AI・経済等）。初期3ジャンル、追加可能 |
| 人気銘柄 | ユーザーのポートフォリオ登録数が多い銘柄。トレンドニュースのスコアリングに使用 |