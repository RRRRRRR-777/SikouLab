# 要件定義書
## 1. 背景・目的

### 1.1 背景
- 既存サービスはDiscord中心で運用されている
- 利用実態として、アクティブに発言しているユーザーは全体の約1.5%程度に留まり、
  約98.5%のユーザーは閲覧専用（ROM専）である
- チャット中心の設計は、情報が流れやすく再利用性が低い
- チャットの治安維持や感情的投稿対応に運営リソースが割かれている

### 1.2 目的
- 記事を主軸とした情報発信プラットフォームを構築する
- 専門家の知見・思考プロセスを、初心者にも分かりやすく簡潔に提供する
- ROM専ユーザーを前提とした「読むだけで価値がある体験」を最優先する
- 他プラットフォームでは得られない投資判断材料を、整理されたUIで提供する

## 2. プラットフォーム方針

### 2.1 コンセプト
- 名称：シコウラボ
- 意味：【TBD】
- 位置づけ：【TBD】
  - 専門家の思考・研究プロセスを、一般ユーザーが身近に覗ける場
  - 情報提供に特化した、受動的でも満足できるプラットフォーム

### 2.2 チャット機能の扱い
- プラットフォーム本体にはチャット機能を実装しない

#### 理由
- 多数派であるROM専ユーザーの体験を守るため
- 誰でも投稿できる場による治安悪化・専門性低下を防ぐため
- 運営リソースを記事執筆・ツール開発に集中させるため

### 2.3 Discordの位置づけ
- Discordはプラットフォームとは切り離して運用する
- 上位プラン特典として「Discord参加権」を付与する予定
- 双方向コミュニケーションはDiscord側に集約する
- このプロジェクトではDiscord、チャットについて想定する必要はない

## 3. ユーザー・ロール

### 3.1 ロール定義
- 管理者
  - 全機能・全データへのアクセス権限を持つ
- 記事投稿権限を持つユーザー
  - 管理者が選定・付与する
  - 記事投稿が可能
- 一般ユーザー
  - 記事・ニュース・銘柄情報の閲覧のみ

### 3.2 共通事項
- 全ユーザーはログイン必須
- 無料ユーザーは存在しない（完全サブスクリプション制）

## 4. プラン・課金

### 4.1 プラン構成
- ベースプラン
  - 記事・ニュースの閲覧
- 上位プラン
  - 追加機能の閲覧（例：個別銘柄の高度な可視化機能）
  - Discord参加権予定

### 4.2 決済・アクセス制御
- Stripeを利用したサブスクリプション決済
- ユーザーとStripe顧客IDをDBで紐づける
- 決済失敗時は自動的にアクセス権限を無効化する

## 5. 機能要件

### 5.1 記事・ニュース機能

#### 記事
- 投稿者：管理者／記事投稿権限ユーザー
- 内容：筆者の意見・分析・考察
- 公開方法：
  - 即時公開
  - 予約投稿（公開日時指定）
- ジャンル分けして表示
  - 6ジャンルほど表示する
  - ジャンルは自由入力で制限なし
- 人気記事機能
  - 72時間以内xView数
- 個別銘柄ページにも表示する予定なので、銘柄と紐づけられるようにする必要がある


#### ニュース
- 投稿者：なし（外部APIから自動取得）
- 公開方法：即時公開のみ
- 保存方針：一度DBに保存する
- 日本語化：
  - 実施する
  - 翻訳手段は比較検討対象とする
    - 非LLM翻訳（高速・低コスト）
    - LLM翻訳（高精度・高コスト）
    - 人手翻訳
- 最新の記事を大きく表示
  - 36時間以内xView数
- 記事と同様編集権限所持者が編集することができる
  - 編集済みと表示するかは検討中


### 5.2 個別銘柄ページ(ポートフォリオ)

#### 対象
- 米国株のみ

#### 目的
- 初心者にも分かる形で投資判断材料を提供する
- 大手プラットフォームにないプラスアルファの情報可視化を行う
- ポートフォリオ全体のその日のパフォーマンス
- ポートフォリオは複数作成できる(5つ)

#### 表示内容
**MUST**
- 株価チャート（時系列）
- 基本ファンダメンタルズ（EPS、時価総額等）
- Unusual Option Activity（大口オプション取引）
- 最新ニュース
  - 銘柄に紐づくニュースを日付降順で表示
- 人気記事/ニュース
  - 銘柄に紐づく、記事とニュースを直近3ヶ月xView数で表示(ここは変数で設定画面で変更できると嬉しい)
- 証券会社レーティング（買い／保有／売り、目標株価）
- アナリスト格付け: MassiveのanalistAPI
  - コメント表示機能
    - コピーボタンでLLMの要約に誘導(暗黙的)

**WANT**
- チャート上へのニュースオーバーレイ表示
  - 表示対象は一定以上の値動きがあった日に限定
  - 閾値はユーザー設定可能

### 5.3 検索機能
- 対象：記事／ニュース／銘柄/アンケート
- アンケートについては、高速性や高度な絞り込みは優先せずカテゴリベースの探索を重視する

### 5.4 アンケート機能
- 複数のアンケートを保持可能（表示ロジックは未定）
- 選択肢：最大9択
- 回答回数：1ユーザー1回（変更不可）
- 投票結果は全ユーザーに公開
- 投票結果はログイン時に1度だけ表示
- ブックマーク可能
- 管理者の予約投稿機能（WANT）

### 5.5 アナリティクス（WANT）
- Metabaseによる可視化
- 対象指標
  - 記事・ニュースの閲覧数
  - 注目銘柄
  - 入会者数／退会者数
  - MAU

### 5.6 相場異変レーダー(Hunting Anomalies)
- ダッシューボード内の機能(独自ページなし)
- 市場で何かが起きてる銘柄を全ての上場銘柄から検出するための機能
> https://massive.com/blog/hunting-anomalies-in-the-stock-market

### 5.7 関連ニュース機能
- 関連ニュースはポートフォリオに関連するニュースだけ表示
- 独自ページあり

### 5.9 ブックマーク機能
- すきな記事、ニュース、投票をブックマークする

### 5.10 設定画面
- アイコン
- userIdの表示
- サブスクリプション
- FAQ
  - 専用のWebサイトを作る(コーポレートサイト)
- 問い合わせ機能

### 5.11 ログイン機能
- Google
- Apple
- X(Twitter)

## 6. 非機能要件
- 高級感・専門性を損なわないUI/UX
- ROM専ユーザーを前提とした設計
- 運営リソースは記事執筆・ツール開発を最優先

## 7. スコープ外
- プラットフォーム内チャット機能
- 板情報・リアルタイム売買支援機能
- Discordとの機能連携

## 8. 未確定・別途整理対象
- 記事コメント機能の有無・形態
- 翻訳方式の最終決定
- 個別銘柄ページ内機能の優先度詳細
- 上位プランの作成タイミング
  - 初期から必要であるか
