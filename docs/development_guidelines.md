# 開発ガイドライン

## 1. 技術スタック

### 1.1 フロントエンド
- **言語・フレームワーク**: Next.js
- **開発ツール（検討中）**:
  1. V0でAI駆動開発
  1. Claude CodeのフロントエンドSkillsを使用
  1. CursorのUI機能を使用
- **開発フロー**:
  - Figmaでデザインモック作成
  - 上記ツールのいずれかでフロントエンドを実装
  - v0の場合は適宜デプロイしてモックとして企画担当と調整
    - その他のツールの場合はフロントエンドようのドメインまたはエンドポイントの設定とCDの設定を検討

### 1.2 バックエンド
- **言語**: Go
- **アーキテクチャ**: Clean Architecture
- **開発フロー**:
  - docs配下の設計書を元にOpenAPIを作成
  - OpenAPIを元にGoでバックエンドを実装

### 1.3 リポジトリ構成
- **構成管理**: モノレポ
  ```
  /frontend   - Next.jsアプリケーション
  /backend    - Goアプリケーション
  /docs       - 要件定義書、設計書、ガイドライン
  ```

### 1.4 インフラ
- **クラウドプラットフォーム**: Google Cloud
- **デプロイ先**: Cloud Run vs GKE（検討中）
  - 想定ユーザー数とアクセス数、外部API実行回数を元に最終決定
  - 想定ユーザー数:
    - 現在: 1200人（アクティブユーザー800人）
    - 3年後: 2400人

### 1.5 環境構成
- **prod（本番環境）**: 必須
- **staging（ステージング環境）**: 必要性を検討中
- **dev（開発環境）**: 用意できたら望ましい

### 1.6 外部サービス連携
- **認証**: OAuth（Google / Apple 等）
- **課金**: Stripe
- **アナリティクス**: Metabase

## 2. テスト方針

### 2.1 バックエンド
- **単体テスト**: 実施

### 2.2 フロントエンド
- **単体テスト**: 実施
- **E2Eテスト**: 導入予定、Playwrightを検討中
- **VRT（Visual Regression Testing）**: 導入予定

## 3. CI/CD

### 3.1 CI（Continuous Integration）
- **フロントエンド**: TBD
  - lint: ticket, dev(要否検討中)
  - format: ticket, dev(要否検討中)
  - 単体テスト: ticket, dev(要否検討中)
  - E2Eテスト: dev, main(要否検討中)
  - VRT（Visual Regression Testing）: dev, main(要否検討中)
- **バックエンド**:
  - lint: ticket, dev(要否検討中)
  - format: ticket, dev(要否検討中)
  - docker build: ticket, dev(要否検討中)
  - 単体テスト: ticket, dev(要否検討中)


### 3.2 CD（Continuous Deployment）
- デプロイを実行
- 詳細なフローは今後策定予定

## 4. コーディング規約
**TBD**: 今後検討・策定予定

## 5. ブランチ戦略

### 5.1 ブランチ種別
- **main**: 本番ブランチ
- **dev-x.x.x.x**: 開発ブランチ（例: dev-1.2.5.0）
- **ticket-xxx**: チケットブランチ（例: ticket-155）

### 5.2 ブランチフロー
- チケットブランチで開発
- 開発ブランチにマージ
- 本番ブランチ（main）にマージしてリリース

## 6. バージョニング戦略

### 6.1 バージョン表記
- **形式**: a.b.c.d（例: 1.2.3.4）

### 6.2 各桁の意味
- **a（メジャーバージョン）**: アプリの大きな仕様変更やアップデートで変更
- **b（マイナーバージョン）**: 仕様変更や機能追加で変更（基本的にこのバージョンが上がる）
- **c（パッチバージョン）**: パッチリリース
- **d（マイナーパッチ）**: マイナーなパッチリリース（基本的に変更されない）

## 7. デプロイフロー
**TBD**: 今後検討・策定予定

