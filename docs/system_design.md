# 基本設計書
## 1. 全体概要

### 1.1 プラットフォーム概要
- 記事を主軸とした情報提供型プラットフォーム
- 専門家の知見・思考プロセスを、初心者にも分かりやすく提供する
- 受動的な利用体験を前提とし、読むだけで価値が成立する設計とする

### 1.2 基本方針
- チャット機能は実装しない
- 記事・ニュース・銘柄情報を整理されたUIで提供する
- 拡張可能性を担保しつつ、初期はMVP(MostViableProduct)を意識して過剰実装を避ける

## 2. システム構成

### 2.1 全体アーキテクチャ
- Frontend：Next.js
- Backend：Go（Clean Architecture）
- 構成管理：モノレポ
  - `/frontend`
  - `/backend`
  - `/docs`

### 2.2 前提条件
- 完全ログイン制
- 完全サブスクリプション制
- 無料ユーザーは存在しない

## 3. 認証・認可

### 3.1 認証方式
- OAuthログインのみ
  - Google / X 等
- メール＋パスワード認証は行わない

### 3.2 ロール
- 管理者
- 記事投稿権限ユーザー
- 一般ユーザー

※ 記事投稿権限は管理者が手動付与

## 4. プラン・権限制御

### 4.1 プラン
- ベースプラン
  - 記事・ニュース・銘柄ページの閲覧
- 上位プラン
  - 銘柄ページ内の追加機能（例：オプションフロー可視化）
  - Discord参加権

### 4.2 権限制御の考え方
- 最終的な利用可能機能は
  **ロール × プラン** の組み合わせで決定する

## 5. 画面構成（概要）

### 5.1 画面一覧
- トップ（記事・ニュース混在フィード）
- 記事詳細
- ニュース詳細
- 銘柄検索／一覧
- 銘柄詳細
- アンケート（投票）
- アンケート結果
- 管理画面

## 6. 機能別基本設計

### 6.1 記事・ニュース

#### 共通方針
- 記事とニュースは**完全に同列**でフィード表示する
- 両者とも「いいね」機能を持つ
- コメント機能は検討中（基本設計では未確定）

#### 記事
- 投稿者：管理者／記事投稿権限ユーザー
- 投稿内容：筆者の意見・分析
- 公開方法：
  - 即時公開
  - 予約投稿（公開日時指定）
- 削除権限
  - 管理者はすべての記事を削除できる
  - 記事投稿権限ユーザーは自分の記事のみ削除できる
  - 一般ユーザーは削除不可

#### ニュース
- 投稿者：なし
- 外部APIから自動取得しDBに保存
- 公開方法：即時のみ
- 日本語翻訳を実施
  - 翻訳方式は比較検討対象
- 削除権限
  - 管理者はすべてのニュースを削除できる
  - 記事投稿権限ユーザー、一般ユーザーは削除不可

### 6.2 個別銘柄ページ

#### 公開範囲
- ログインユーザーであれば誰でも閲覧可能

#### 提供価値
- 初心者にも分かる投資判断材料を簡潔なUIで提供
- 大手プラットフォームにない可視化を提供する

#### 表示内容
**必須**
- 株価チャート（時系列）
- 基本ファンダメンタルズ（EPS、時価総額等）
- Unusual Option Activity
- 関連ニュース・記事の集約表示
- 証券会社レーティング（買い／保有／売り、目標株価）

**任意**
- ニュース×値動きオーバレイ表示
  - 一定以上の値動きがあった日のみニュースを表示
  - 閾値はユーザー設定可能

### 6.3 検索機能
- 対象：記事／ニュース／銘柄/アンケート
- アンケートについては、高速性や高度な絞り込みは優先せずカテゴリベースの探索を重視する

### 6.4 アンケート（投票）機能
- 複数アンケートを保持
- 最新または指定条件のアンケートを表示
- 選択肢：最大9
- 回答回数：1ユーザー1回（変更不可）
- 投票結果は全ユーザーに公開
- 予約投稿対応（WANT）


### 6.5 管理画面

#### 対象ロール
- 管理者のみ

#### 機能
- 記事の作成／編集／公開／予約
- アンケートの作成／公開管理
- ユーザー管理
  - ロール付与
  - プラン状態確認
- アナリティクスの確認

## 7. データ取得・更新方式

### 7.1 ニュース・市場データ
- 基本は **バッチ／定期取得**
- 取得頻度は高頻度を想定（30秒〜2分程度）

### 7.2 将来検討
- 一部データについてはリアルタイム取得も検討対象
- 初期リリースでは安定性・コストを優先する


## 8. アナリティクス

### 8.1 初期対応
- 記事／ニュースの閲覧数
- いいね数
- MAU
- 入会／退会数（Stripe連携）

### 8.2 可視化
- Metabaseを利用

## 9. 非対応・留保事項
- チャット機能
- 板情報・売買支援機能
- コメント機能（検討中）

## 10. 次工程への接続
- 本基本設計をもとに以下を実施する
  - ER図作成
  - OpenAPI設計
  - 画面設計（Figma）
