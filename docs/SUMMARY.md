# ドキュメント一覧

## サービス定義
* docs/service.md
  * 概要: サービス定義書。コンセプト、ターゲット、ミッション・ビジョン・バリュー、提供価値、サービス品質（パフォーマンス・可用性・セキュリティ・UX原則）、ブランドガイドラインを定義。

## プロジェクト管理ドキュメント
* docs/setup.md
  * 概要: 環境構築の手順書。必須ツール・バージョン、リポジトリ初期化、環境変数、ローカルサービス起動、開発コマンドを記載。
* docs/development_guidelines.md
  * 概要: 開発に関する技術的なガイドライン。技術スタック（Next.js + Go）、リポジトリ構成（モノレポ）、インフラ（Google Cloud）、外部サービス連携（OAuth, Stripe, Metabase）、API連携方針、フロントエンドディレクトリ構成を定義。
    テスト方針、CI/CD、ブランチ戦略、バージョニング戦略、デプロイフローを記載。
* docs/documentation_guidelines.md
  * 概要: ドキュメント作成・管理・運用の方針を定義。ディレクトリ構成、ファイル命名規則、更新ルール、ドキュメント種別を記載。
    SUMMARY.md更新ルールやAIエージェント向けガイドラインを含む。

## ADR（Architecture Decision Records）
技術選定の意思決定記録。選定理由と検討した選択肢を記載。

* docs/adr/001-ui-library.md
  * 概要: UIライブラリの選定。shadcn/ui + Tailwind CSSを採用。
    カスタマイズ自由度とデザインツール連携を重視した選定理由を記載。
* docs/adr/002-form-management.md
  * 概要: フォーム管理ライブラリの選定。React Hook Form + Zodを採用。
    プロジェクトで想定されるフォーム一覧と選定理由を記載。
* docs/adr/003-data-fetching.md
  * 概要: データフェッチライブラリの選定。TanStack Queryを採用。
    無限スクロール、楽観的更新、リアルタイム更新の要件を満たす選定理由を記載。
* docs/adr/004-backend-database.md
  * 概要: バックエンドDBアクセス・マイグレーションの選定。sqlx + golang-migrateを採用。
    SQL重視のアプローチとSQLファイル管理の選定理由を記載。
* docs/adr/005-staging-environment.md
  * 概要: staging環境の方針。初期は構築せず、必要に応じて後から追加。
    dev → prod直接のフローと、staging追加を検討するタイミングを記載。
* docs/adr/006-deploy-flow.md
  * 概要: デプロイフローの選定。GitHub Environment承認を採用。
    トリガー、承認プロセス、ロールバック方針を記載。
* docs/adr/007-log-monitoring.md
  * 概要: ログ監視方式の選定。Cloud Logging + Cloud Monitoring（GCP完結）を採用。
    障害発生時のフロー、通知先（Cloud Consoleアプリ）、将来拡張（LLM分析）を記載。
* docs/adr/008-api-integration.md
  * 概要: フロントエンドとバックエンドのAPI連携方針。axios + httpOnly Cookie（SameSite=Lax）を採用。
    認証方式、型定義管理、エラーハンドリング、将来のモバイル対応方針を記載。
* docs/adr/009-frontend-directory-structure.md
  * 概要: Next.js 15（App Router）のベストプラクティスに沿ったフロントエンドディレクトリ構成。
    app/はルーティング専用、components/features/で機能別整理、lib/utils/storesの役割を定義。
* docs/adr/010-quality-metrics.md
  * 概要: 品質計測の方針。パフォーマンス（Lighthouse CI + Cloud Monitoring）、可用性（SLA 99.5%、Uptime Check）、
    リグレッション防止（市場障害・ロールバック、Jira + Metabase）の計測フロー・アラート設定を記載。
* docs/adr/011-rbac-vs-abac.md
  * 概要: 権限モデルの選定。RBAC（ロールベース）を採用。
    何も決まっていない状態から選択し、プロダクトの要件に最適な方式を検討。
    RBAC/ABAC/ハイブリッドの比較、RBACからABACへの移行工数（160時間）を記載。
* docs/adr/012-repo-map.md
  * 概要: AI向けコード索引（Repo Map）の導入。Aiderの思想に基づき、AIがコードベースを効率的に理解できる自動生成索引を導入。
    Go統一ツールでフロントエンド・バックエンド両方のRepo Mapを自動生成。
    Go統一/各言語/軽量LLMの比較、CI自動更新設計を記載。
* docs/adr/013-markdown-library.md
  * 概要: Markdownライブラリの選定。react-markdown（表示）+ @uiw/react-md-editor（エディタ）を採用。
    記事詳細ページのレンダリング・目次生成と、記事作成・編集のエディタ要件に基づく選定理由を記載。
* docs/adr/014-search-engine.md
  * 概要: 検索エンジン方式の選定。PGroonga（PostgreSQL拡張）を採用。
    LIKE/pg_bigm/PGroonga/Typesense/Elasticsearchを比較し、日本語形態素解析の精度・PG内完結・スコアリング対応を理由に選定。

## バージョン別ドキュメント（versions/）
* docs/versions/1_0_0/requirements.md
  * 概要: v1.0.0の要件定義書。「記事購読型コミュニティ」としての核心価値を明記。成功基準（記事閲覧率・継続率含む5指標）、
    ペルソナ（ROM専・投資初心者・アクティブ投資家）、ユーザーストーリー（US-01〜12）、機能一覧（F-01〜F-12、子機能含む計51項目）。
    機能ID体系: F-01ログイン、F-02ダッシュボード、F-03個別銘柄、F-04記事、F-05ニュース、F-06アンケート、F-07検索、F-08ブックマーク、
    F-09ポートフォリオ、F-10設定、F-11ニュースレター、F-12管理者ページ。
    UI/UX共通要件: サイドバー（記事タブ折りたたみ・状態永続化）、ダークモード、レスポンシブ、カラーコード。
* docs/versions/1_0_0/system-design.md
  * 概要: v1.0.0の基本設計書。機能一覧・相関図・依存関係（2.機能一覧）、画面一覧・遷移図（3.画面設計、S-01〜S-23、S-02はS-02-1〜S-02-5のサブ画面を含む、グローバル検索は補足記載、PencilノードID付き）、
    共通コンポーネント（サイドバー）、外部インターフェース（5.外部API連携）、権限マトリクス（6.ロール×機能、サブスク状態×アクセス）を定義。
    データ設計（4.データ設計）は別ドキュメント（system_datas.md）に切り出し。
    要件定義書のID体系（F-01〜F-12）に準拠。管理者ページ（F-12、画面S-18〜S-23）、インサイダー取引（F-03-4）、ニュースレター関連テーブル、user_settingsテーブル追加。
* docs/versions/1_0_0/system_datas.md
  * 概要: v1.0.0のデータ設計書。ER図（全35テーブルのリレーション）、テーブル一覧、カラム定義（全テーブルの詳細なカラム仕様）を定義。

## 機能別詳細仕様（functions/）
### ダッシュボード機能（F-02）
* docs/functions/dashboard/home.md
  * 概要: ダッシュボード（F-02）の詳細設計書。ログイン後のホーム画面。相場インデックス（F-02-1）、記事・ニュースハイライト（F-02-2）、
    ポートフォリオウィジェット（F-02-3）、関連ニュースウィジェット（F-02-4）、相場異変レーダー（F-02-5）の5ウィジェットを定義。
    画面設計図・シーケンス図・API仕様・機能要件・非機能要件・テストケースを含む。

### 認証機能（F-01）
* docs/functions/auth/login.md
  * 概要: ログイン機能（F-01）の詳細設計書。Google / Apple / XによるOAuth認証、初回ログイン時のユーザー登録・Stripeカスタマー作成、
    セッション管理（httpOnly Cookie）、ログアウトの仕様を定義。
    画面設計図・シーケンス図・API仕様・機能要件・非機能要件・テストケースを含む。

### 記事機能（F-04）
* docs/functions/article/home.md
  * 概要: 記事ホーム画面（F-04-3, F-04-4）の詳細設計書。人気記事（72時間以内×View数）、ジャンル別記事表示の仕様を定義。
    画面設計図・API仕様・機能要件・非機能要件・テストケースを含む。
* docs/functions/article/detail.md
  * 概要: 記事詳細ページ（F-04-5）の詳細設計書。記事全文表示、Markdownレンダリング、目次自動生成、関連銘柄表示の仕様を定義。
    画面設計図・API仕様・機能要件・非機能要件・テストケースを含む。
* docs/functions/article/create-edit.md
  * 概要: 記事作成・編集（F-04-1）の詳細設計書。Markdownエディタ、ジャンル選択、関連銘柄選択、即時/予約公開、
    ニュースレター配信リスト追加の仕様を定義。
    画面設計図・API仕様・機能要件・非機能要件・テストケースを含む。
* docs/functions/article/schedule.md
  * 概要: 予約投稿（F-04-2）の詳細設計書。予約日時指定、自動公開バッチ処理、予約記事一覧・キャンセルの仕様を定義。
    シーケンス図・機能要件・非機能要件・テストケースを含む。

### 銘柄機能（F-03）
* docs/functions/stock/home.md
  * 概要: 個別銘柄ページ（F-03）の詳細設計書。価格チャート（期間切り替え・ニュースオーバーレイ）、ファンダメンタルズ、企業概要、財務データ、
    インサイダー取引、UOA/レーティング、最新ニュース、人気コンテンツ（直近3ヶ月×View数）、アナリストレーティングの仕様を定義。
    画面設計図・シーケンス図・API仕様・機能要件・非機能要件・テストケースを含む。

### ポートフォリオ機能（F-09）
* docs/functions/portfolio/home.md
  * 概要: ポートフォリオ機能（F-09）の詳細設計書。銘柄をまとめて管理（最大5つまで）、パフォーマンス表示（現在価値・損益率）、関連ニュースページの仕様を定義。
    ポートフォリオ管理画面（作成・編集・削除、銘柄追加・削除）、ティッカー検索・銘柄リスト・銘柄詳細ページからの追加、
    取得価格・保有株数管理、関連ニュース一覧表示の仕様を定義。
    画面設計図・シーケンス図・API仕様・機能要件・非機能要件・テストケースを含む。

### ニュース機能（F-05）
* docs/functions/news/home.md
  * 概要: ニュースホーム画面（F-05-3, F-05-4）の詳細設計書。トレンドニュース表示（直近24時間以内×スコア順）、
    ジャンル別ニュース表示の仕様を定義。
    画面設計図・シーケンス図・API仕様・機能要件・非機能要件・テストケースを含む。
* docs/functions/news/fetch.md
  * 概要: ニュース自動取得・翻訳（F-05-1, F-05-2）の詳細設計書。外部APIからのニュース自動取得・日本語翻訳、
    ジャンル・ティッカー紐付けの仕様を定義。
    シーケンス図・機能要件・非機能要件・テストケースを含む。
* docs/functions/news/genre-detail.md
  * 概要: ジャンル詳細ページ（F-05-5）の詳細設計書。ジャンル別ニュース一覧、複数フィルター（検索・期間・タイプ・センチメント・ティッカー・ソート順）、
    無限スクロール（cursor方式、最大1000件）の仕様を定義。
    画面設計図・シーケンス図・機能要件・非機能要件・テストケースを含む。

### アンケート機能（F-06）
* docs/functions/poll/home.md
  * 概要: アンケート機能（F-06）の詳細設計書。最大9択、1ユーザー1回投票のアンケート機能。
    アンケート一覧表示・投票実行・結果表示の仕様を定義。
    画面設計図・シーケンス図・機能要件・非機能要件・テストケースを含む。

### 検索機能（F-07）
* docs/functions/search/home.md
  * 概要: 検索機能（F-07）の詳細設計書。記事・ニュース・銘柄・アンケートの統合検索。
    グローバル検索バー・検索結果画面（タブ形式で表示）の仕様を定義。
    シーケンス図・機能要件・非機能要件・テストケースを含む。

### ブックマーク機能（F-08）
* docs/functions/bookmark/home.md
  * 概要: ブックマーク機能（F-08）の詳細設計書。記事・ニュース・アンケートのブックマーク。
    ブックマーク操作（トグル）、ブックマーク一覧表示（タブ形式）、ブックマーク解除の仕様を定義。
    関連テーブル（article_bookmarks, news_bookmarks, poll_bookmarks）・シーケンス図・機能要件・非機能要件・テストケースを含む。

### 設定機能（F-10）
* docs/functions/settings/home.md
  * 概要: 設定画面（F-10）の統合詳細設計書。ユーザー設定の統合管理画面。
    プロフィール設定（F-10-1）、サブスクリプション管理（F-10-2）、メールアドレス登録（F-10-3）、FAQ・問い合わせ（F-10-4）の仕様を定義。
    メール登録ウィジェット・フロー図・シーケンス図・機能要件・非機能要件・テストケースを含む。

### ニュースレター機能（F-11）
* docs/functions/newsletter/home.md
  * 概要: ニュースレター機能（F-11, F-11-1, F-11-2）の詳細設計書。メール登録ユーザーに選択した記事の要約を毎日配信（朝7:30）。
    記事要約生成（LLMで200-300文字）・定期配信の仕様を定義。
    シーケンス図・機能要件・非機能要件・テストケースを含む。
### 管理者機能（F-12）
* docs/functions/admin/home.md
  * 概要: 管理者ページ（F-12〜F-12-6）の詳細設計書。コンテンツ管理（記事・ニュース・アンケート）、ユーザー管理、
    ニュースレター管理（F-12-3統合）、設定管理、アナリティクス、お知らせ通知の全機能を1ファイルで定義。
    権限（admin/writer）・画面設計（S-18〜S-23）・ER図・シーケンス図・機能要件・テストケースを含む。
