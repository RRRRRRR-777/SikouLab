# ADR-003: データフェッチライブラリの選定

## ステータス
承認済み

## コンテキスト
フロントエンドでのデータフェッチ（キャッシュ、状態管理、リアルタイム更新）のためのライブラリ選定が必要。

プロジェクトで必要な機能：
- 無限スクロール（記事一覧など）
- 楽観的更新（いいね押下時に即座にUI反映）
- リアルタイム更新（株価表示など）

## 決定
**TanStack Query** を採用する。

## 検討した選択肢

| 評価軸 | SWR | TanStack Query |
|--------|-----|----------------|
| 学習コスト | ◎ | ○ |
| 無限スクロール | ○ | ◎ |
| 楽観的更新 | ○ | ◎ |
| リアルタイム更新 | ○ | ◎ |
| キャッシュ制御 | ○ | ◎ |
| DevTools | △ | ◎ |
| バンドルサイズ | ◎ 約4KB | ○ 約13KB |

## 理由
1. **必要機能の充実**: 無限スクロール、楽観的更新、リアルタイム更新すべてで優位
2. **DevTools**: 開発時のデバッグに有用
3. **株価リアルタイム更新との相性**: refetchInterval、WebSocket連携がしやすい

## 影響
- TanStack Query DevToolsを開発環境で有効化する
- キャッシュ戦略を機能ごとに設計する（staleTime, cacheTime等）
