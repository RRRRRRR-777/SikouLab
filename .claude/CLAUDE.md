# シコウラボ（SikouLab） プラットフォーム 設計・実装指針

## 目的
本ドキュメントは シコウラボ（SikouLab） プラットフォームの
設計・実装・運用に関わる人間およびAIエージェントが、
意思決定に迷わず、同じ前提で動くための行動指針を定義する。

## プロダクト原則（最重要）
* 受動的体験を最優先（読む体験が価値の中心）
* 初期は「作りすぎない」「将来拡張を壊さない」

## 対象スコープ
**含む**
* 記事（作成／編集／公開／予約）
* ニュース（外部API取得・自動投稿）
* アンケート（投票）
* 米国株個別銘柄ページ
* サブスクリプション制御（Stripe連携）
* いいね機能
* 閲覧アナリティクス

**含まない（v1）**
* プラットフォーム内チャット
* コメント機能（検討中）
* メール＋パスワード認証
* Discord連携実装（存在は別途運用）

## 認証・課金方針
* 認証：OAuthのみ（Google / Apple 等）
* 閲覧：誰でも可能
* 機能利用：ログイン必須
* 有料判定
  * Stripe Customer ID を正とする
  * subscription_status により制御
  * 決済失敗時は即時権限制限

## ロール・権限
### ロール
* admin
  * 全管理機能
* writer
  * 記事作成／編集／公開／予約
* user
  * 閲覧・投票・いいねのみ

### プラン
* ベースプラン
  * 記事・ニュース閲覧
* 上位プラン
  * 個別銘柄の高度可視化など

※ 最終権限は ロール × プラン

## データ設計原則
* ER図を単一の正とする
* 先にDBに保存 → 表示・加工
* ニュース・株価系データは
  * バッチ中心
  * 30秒〜2分以内更新も将来検討
* 削除より「状態管理」を優先

## UI / UX 方針
* チャット前提UIは完全排除
* 「今日一番読まれている」を軸に構成
* 能動操作は最小（投票・いいね程度）
* 見た目より「読める・迷わない」を優先

## タスク管理方針
* タスク管理はJiraで行う
* TodoWriteツールは使用せず、Jira MCP ツールを使用する
* タスクの追加・参照・更新時は必ずJiraを使用する
* 新規タスク作成時は適切なプロジェクトと課題タイプを指定する

## デザイン・UI参照
* Figma URL: https://www.figma.com/design/KLDR5porwKHiMz5EWp3ABs/Web%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%80%80%E3%82%B7%E3%82%B3%E3%82%A6%E3%83%A9%E3%83%9C%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE
* File Key: KLDR5porwKHiMz5EWp3ABs

## ドメイン別詳細ルール
ドメイン別の詳細なルールは `.claude/rules/` 配下のファイルを参照してください。

* @.claude/rules/docs.md - docsディレクトリ関連ルール
* @.claude/rules/frontend.md - frontendディレクトリ関連ルール
* @.claude/rules/backend.md - backendディレクトリ関連ルール
