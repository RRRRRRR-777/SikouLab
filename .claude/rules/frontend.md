---
paths:
  - "frontend/**/*"
---

# frontendディレクトリルール

## UI/UX原則
* **受動的体験を最優先** - ユーザーは「読む」ことが主目的
* **チャット前提UIは完全排除**
* **能動操作は最小限** - 投票・いいね程度に留める
* **見た目より「読める・迷わない」を優先**

## コンポーネント設計
* 「今日一番読まれている」を軸にレイアウト構成
* 過度な抽象化を避ける - 必要になってから抽象化
* 3回同じパターンが現れたら抽象化を検討

## セキュリティ
* XSS対策を必須とする - ユーザー入力は常にサニタイズ
* 認証状態はバックエンドで必ず検証（フロントは表示制御のみ）
* APIキーやシークレットをフロントエンドに含めない

## パフォーマンス
* 初期表示速度を最優先
* 必要になるまで機能を読み込まない（Lazy Loading）
* 画像は適切なサイズ・フォーマットで配信

## 実装時の注意
* エラーハンドリングは境界（ユーザー入力、外部API）でのみ
* 内部のコード・フレームワークは信頼する
* 使われていないコードは完全削除（後方互換性ハック不要）

## Next.js 15 必須ルール

### Breaking Changes（必ず守る）
* `params`, `searchParams`, `cookies()`, `headers()` は **async** で取得
  ```typescript
  // ✅ 正しい
  export default async function Page({ params }) {
    const { id } = await params;
  }
  ```
* `useFormState` → `useActionState`（`react` からimport）
* `fetch()` はデフォルトでキャッシュされない（明示的に設定が必要）

### 基本原則
* Server Components をデフォルトとし、Client Components は必要時のみ
* データ取得はサーバーで行い、クライアントでの `useEffect` + `fetch` は避ける
* Server Actions でミューテーションを実装

### 詳細リファレンス
コード例やパターンの詳細が必要な場合は `/nextjs-15` スキルを呼び出してください。
