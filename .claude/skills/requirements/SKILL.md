---
name: requirements
description: バージョン単位の要件定義書を作成するSkill。Why/Whatを明確にし、基本設計書・機能設計書への橋渡しとなるドキュメントを作成します。
---

# Requirements Skill

## 概要

新規バージョンの要件定義書として、`docs/versions/<version>/requirements.md` を作成するSkillです。

**位置づけ**: 基本設計書・機能設計書（feature-spec）の前段階。「何を」「なぜ」作るかを定義し、後続の設計ドキュメントへの入力となる。

```
/requirements（要件定義）
  ↓ What/Why を定義
/basic-design（基本設計）
  ↓ 機能分解・構成を定義
/feature-spec（機能設計）
  ↓ 詳細仕様を定義
実装
```

## 必須入力

このSkillを呼び出す際は、以下の情報を提供してください：

- **バージョン番号**（例: `1_0_0`, `1_1_0`）
- **背景・目的**（なぜこのバージョンが必要か）
- **実現したい機能の概要**（箇条書きでOK）

## 出力ファイル

```
docs/versions/<version>/requirements.md
```

例: `docs/versions/1_0_0/requirements.md`

## 出力テンプレート

```markdown
# バージョン X.X.X 要件定義

## 1. 概要

### 1.1 背景
{このバージョンが必要になった背景・課題}

### 1.2 目的
{このバージョンで達成したいこと}

## 2. 成功基準

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| {例: 記事公開までの操作数} | {5ステップ以内} | {ユーザーテスト} |
| {例: ページ読み込み速度} | {3秒以内} | {Lighthouse} |

※ 可能な限り定量的に記述する（SMART原則）

## 3. 対象ユーザー

| ペルソナ | 特徴 |
|---------|------|
| {ペルソナ名} | {属性・状況・主なニーズ} |

## 4. ユーザーストーリー

| ID | ペルソナ | ストーリー | 関連機能 |
|----|---------|-----------|----------|
| US-01 | {誰} | {ペルソナ}として、{〜したい}。なぜなら{〜だから}。 | F-01 |

### ユーザーストーリーの書き方
- **具体的に**: 「簡単に」ではなく「3ステップで」「一目で」
- **理由を明記**: 行動の動機を書く
- **1ストーリー1ゴール**: 複数のゴールを混在させない

## 5. 機能一覧
- ID体系
  - `F-XX`: 大機能
  - `F-XX-Y`: 子機能（大機能の構成要素）
- 優先度の定義
  - **MUST**: このバージョンで必ず実装する
  - **WANT**: 余裕があれば実装する
- ステータスの定義
  - **未着手**: 詳細設計未実施
  - **設計中**: 詳細設計作成中（feature-spec実行中）
  - **実装中**: 実装作業中
  - **完了**: 実装・テスト完了

| ID | 機能名 | 概要 | 優先度 | ステータス | 詳細設計 |
|----|--------|------|--------|-----------|----------|
| F-01 | {大機能名} | {何ができるか想像できる説明} | MUST | 未着手 | - |
| F-01-1 | {子機能} | {説明} | MUST | 未着手 | - |
| F-02 | {大機能名} | {説明} | WANT | 未着手 | - |

## 6. スコープ外

{このバージョンでは対応しない範囲を明示的に列挙}
- {対応しないこと1}
- {対応しないこと2}

## 7. 制約・前提

{期限、リソース、依存関係などのビジネス制約}
- {制約1}
- {制約2}

## 8. 未確定事項

{決定が必要だが、まだ確定していない事項}
- [ ] {未確定事項1}
- [ ] {未確定事項2}

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| {用語} | {このドキュメント内での意味} |
```

## 実行手順

1. **入力情報の確認**: ユーザーから提供された情報を確認
2. **既存ドキュメント参照**:
   - 前バージョンの要件定義があれば参照
   - `docs/versions/` 配下の構造を確認
3. **質疑応答**: 不明点があればAskUserQuestionで確認
   - 特に「スコープ外」の明確化が重要
   - ペルソナ・ユーザーストーリーの認識合わせ
4. **ドキュメント生成**: テンプレートに沿ってMarkdownファイルを作成
5. **SUMMARY.md更新**: `docs/SUMMARY.md` を更新

## feature-specとの連携

このSkillで作成した機能一覧が、機能設計（feature-spec）の入力となる。

```
/requirements 実行
  └─ 機能一覧に「F-01: 記事作成」を定義
       ↓
/feature-spec 実行
  └─ 「F-01: 記事作成」の詳細仕様を docs/functions/articles/creation.md に作成
```

## 注意事項

- **曖昧さを排除**: 「高速」→「3秒以内」のように定量化する
- **用語の統一**: 同じ概念に複数の呼び方を使わない
- **スコープ外を明示**: 後の認識齟齬を防ぐため必ず記載
- **未確定事項は放置しない**: 決定期限を意識する
- **機能IDの一貫性**: 後続ドキュメントでも同じIDを使用する

## 不明点の解消

設計中に以下のような状況に遭遇した場合、`/ask` スキルを活用してください：

- 抽象的で具体化が難しい
- 情報が不足している
- 判断基準や優先順位が不明確
- トレードオフの選択に迷う

`/ask` は暗黙知を言語化するインタビュー型スキルです。質問を通じて前提・制約・判断基準を明確にし、トレードオフ表を作成できます。
